## 题目#1 完成自己发行的 Token 从 L1 到 L2 的跨链

编写一个自己的 Token， 并部署到 Sepolia ， 并将其跨到 Optimism Sepolia 或 Base Sepolia， 操作步骤：

1. 部署自己的 L1 Token
2. 使用 OptimismMintableERC20Factory 在 L2 上创建对应的 Token
3. L1 Token 授权给 L1StandardBridge
4. 调用 L1StandardBridge 的 bridgeERC20

上面各合约地址可以在 https://docs.optimism.io/superchain/addresses 上查询。

请贴出第 4 步交易的浏览器链接 和 对应 L2 的交易链接

## Answer

- 第 4 步交易的浏览器链接: https://sepolia.etherscan.io/tx/0x7be52532f7e4358124ee6c576991e546ba92b06c488fe955fd1fd075b522f0b8
- OP Sepolia 网络上对应的 Token 地址: https://sepolia-optimism.etherscan.io/address/0xb573eA4f95aAFacc41174A24661d322e3E28db47

## 操作流程

### 1. 部署自己的 L1 Token

ERC20 Token MyToken 合约已经部署过：

- 代码：foundry_projects/src/W2D4/MyToken.sol
- 地址：https://sepolia.etherscan.io/address/0xc044905455dbe3ba560ff064304161b9995b1898

### 2. 使用 OptimismMintableERC20Factory 在 L2 上创建对应的 Token

- 合约 OptimismMintableERC20Factory
  - 在 OP Sepolia 测试网上的地址: 0x4200000000000000000000000000000000000012
  - 代码地址: https://github.com/ethereum-optimism/optimism/blob/develop/packages/contracts-bedrock/src/universal/OptimismMintableERC20Factory.sol
- 调用方法: createStandardL2Token(address \_remoteToken, string memory \_name, string memory \_symbol)
- OP Sepolia 网络上对应的 Token 地址: 0xb573eA4f95aAFacc41174A24661d322e3E28db47

```shell
# 执行命令
cast send 0x4200000000000000000000000000000000000012 \
    "createStandardL2Token(address,string,string)" \
    "0xc044905455dbe3ba560ff064304161b9995b1898" \
    "MyToken" \
    "MTK" \
    --rpc-url $OP_SEPOLIA_RPC_URL \
    --private-key $PRIVATE_KEY

# 执行结果
blockHash            0xc08ac11b2b6c53a64a0dfb2a174f2f1fab3eec75f99985c15148f3a497316411
blockNumber          31981277
contractAddress
cumulativeGasUsed    3360822
effectiveGasPrice    1000250
from                 0x91c035258B5a3B13211A74726d72090734E5BF4a
gasUsed              1281415
logs                 [{"address":"0x4200000000000000000000000000000000000012","topics":["0xceeb8e7d520d7f3b65fc11a262b91066940193b05d4f93df07cfdced0eb551cf","0x000000000000000000000000c044905455dbe3ba560ff064304161b9995b1898","0x000000000000000000000000b573ea4f95aafacc41174a24661d322e3e28db47"],"data":"0x","blockHash":"0xc08ac11b2b6c53a64a0dfb2a174f2f1fab3eec75f99985c15148f3a497316411","blockNumber":"0x1e7fedd","transactionHash":"0x297d53c11db0eff2f9b3b1b9dbc148e2c367c255361c92c052c1c8277ed29072","transactionIndex":"0x4","logIndex":"0x3","removed":false},{"address":"0x4200000000000000000000000000000000000012","topics":["0x52fe89dd5930f343d25650b62fd367bae47088bcddffd2a88350a6ecdd620cdb","0x000000000000000000000000b573ea4f95aafacc41174a24661d322e3e28db47","0x000000000000000000000000c044905455dbe3ba560ff064304161b9995b1898"],"data":"0x00000000000000000000000091c035258b5a3b13211a74726d72090734e5bf4a","blockHash":"0xc08ac11b2b6c53a64a0dfb2a174f2f1fab3eec75f99985c15148f3a497316411","blockNumber":"0x1e7fedd","transactionHash":"0x297d53c11db0eff2f9b3b1b9dbc148e2c367c255361c92c052c1c8277ed29072","transactionIndex":"0x4","logIndex":"0x4","removed":false}]
logsBloom            0x00000002000000000000000000000000800000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000400000000000000000000000200000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000200000000000000000000000000000001000100000000000008000000000000000000000000000000000020000000000000040000000080000000080000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000
root
status               1 (success)
transactionHash      0x297d53c11db0eff2f9b3b1b9dbc148e2c367c255361c92c052c1c8277ed29072
transactionIndex     4
type                 2
blobGasPrice
blobGasUsed
to                   0x4200000000000000000000000000000000000012
l1BaseFeeScalar      7600
l1BlobBaseFee        85
l1BlobBaseFeeScalar  862000
l1Fee                64351888
l1GasPrice           5016796
l1GasUsed            1687
```

### 3. L1 Token 授权给 L1StandardBridge

- 合约 L1StandardBridge 在 Sepolia 测试网上的地址: 0xFBb0621E0B23b5478B630BD55a5f21f67730B0F1
- 调用 MyToken 合约方法: approve(address spender, uint256 value)

```shell
# 执行命令
cast send 0xC044905455DBe3ba560FF064304161b9995B1898 \
    "approve(address,uint256)" \
    "0xFBb0621E0B23b5478B630BD55a5f21f67730B0F1" \
    "100000000000000000000000" \
    --rpc-url $SEPOLIA_RPC_URL \
    --private-key $PRIVATE_KEY

# 执行结果
blockHash            0xa4255e4bd41ad5fdcd9efb918c56cc4f3cd655d146c0c50c68ead3567b465a7c
blockNumber          9031462
contractAddress
cumulativeGasUsed    33501661
effectiveGasPrice    4716387
from                 0x91c035258B5a3B13211A74726d72090734E5BF4a
gasUsed              46954
logs                 [{"address":"0xc044905455dbe3ba560ff064304161b9995b1898","topics":["0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925","0x00000000000000000000000091c035258b5a3b13211a74726d72090734e5bf4a","0x000000000000000000000000fbb0621e0b23b5478b630bd55a5f21f67730b0f1"],"data":"0x00000000000000000000000000000000000000000000152d02c7e14af6800000","blockHash":"0xa4255e4bd41ad5fdcd9efb918c56cc4f3cd655d146c0c50c68ead3567b465a7c","blockNumber":"0x89cf26","transactionHash":"0xbe2b6b2e144ed80a56fc6c50fa5e53b6707bdcfdd7178adf781267030be8604e","transactionIndex":"0x100","logIndex":"0x29e","removed":false}]
logsBloom            0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004000004000000000000000000001000000000000000000040000000000000000000000000000800020000000000000000000010000000400000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000010000000000001000000000000000000000000000000000000000000000000
root
status               1 (success)
transactionHash      0xbe2b6b2e144ed80a56fc6c50fa5e53b6707bdcfdd7178adf781267030be8604e
transactionIndex     256
type                 2
blobGasPrice
blobGasUsed
to                   0xC044905455DBe3ba560FF064304161b9995B1898
```

### 4. 调用 L1StandardBridge 的 bridgeERC20 方法

- 合约 L1StandardBridge
  - 在 Sepolia 测试网上的地址: 0xFBb0621E0B23b5478B630BD55a5f21f67730B0F1
  - 代码地址: https://github.com/ethereum-optimism/optimism/blob/develop/packages/contracts-bedrock/src/L1/L1StandardBridge.sol
- 需要调用的 bridgeERC20 方法在父合约 StandardBridge 中
  - 代码地址: https://github.com/ethereum-optimism/optimism/blob/develop/packages/contracts-bedrock/src/universal/StandardBridge.sol
  - 调用方法: bridgeERC20(address \_localToken, address \_remoteToken, uint256 \_amount, uint32 \_minGasLimit, bytes calldata \_extraData)

```shell
# 执行命令
cast send 0xFBb0621E0B23b5478B630BD55a5f21f67730B0F1 \
    "bridgeERC20(address,address,uint256,uint32,bytes)" \
    "0xC044905455DBe3ba560FF064304161b9995B1898" \
    "0xb573eA4f95aAFacc41174A24661d322e3E28db47" \
    "10000000000" \
    "1000000" \
    "0x" \
    --rpc-url $SEPOLIA_RPC_URL \
    --private-key $PRIVATE_KEY

# 执行结果
blockHash            0x2cd24fe031a99bc7cb14b473d4381db373829ff15df141ab5e433d00bef1a0cb
blockNumber          9031557
contractAddress
cumulativeGasUsed    16423927
effectiveGasPrice    4807788
from                 0x91c035258B5a3B13211A74726d72090734E5BF4a
gasUsed              1488762
logs                 [{"address":"0xc044905455dbe3ba560ff064304161b9995b1898","topics":["0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef","0x00000000000000000000000091c035258b5a3b13211a74726d72090734e5bf4a","0x000000000000000000000000fbb0621e0b23b5478b630bd55a5f21f67730b0f1"],"data":"0x00000000000000000000000000000000000000000000000000000002540be400","blockHash":"0x2cd24fe031a99bc7cb14b473d4381db373829ff15df141ab5e433d00bef1a0cb","blockNumber":"0x89cf85","transactionHash":"0x7be52532f7e4358124ee6c576991e546ba92b06c488fe955fd1fd075b522f0b8","transactionIndex":"0x8e","logIndex":"0xff","removed":false},{"address":"0xfbb0621e0b23b5478b630bd55a5f21f67730b0f1","topics":["0x718594027abd4eaed59f95162563e0cc6d0e8d5b86b1c7be8b1b0ac3343d0396","0x000000000000000000000000c044905455dbe3ba560ff064304161b9995b1898","0x000000000000000000000000b573ea4f95aafacc41174a24661d322e3e28db47","0x00000000000000000000000091c035258b5a3b13211a74726d72090734e5bf4a"],"data":"0x00000000000000000000000091c035258b5a3b13211a74726d72090734e5bf4a00000000000000000000000000000000000000000000000000000002540be40000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000","blockHash":"0x2cd24fe031a99bc7cb14b473d4381db373829ff15df141ab5e433d00bef1a0cb","blockNumber":"0x89cf85","transactionHash":"0x7be52532f7e4358124ee6c576991e546ba92b06c488fe955fd1fd075b522f0b8","transactionIndex":"0x8e","logIndex":"0x100","removed":false},{"address":"0xfbb0621e0b23b5478b630bd55a5f21f67730b0f1","topics":["0x7ff126db8024424bbfd9826e8ab82ff59136289ea440b04b39a0df1b03b9cabf","0x000000000000000000000000c044905455dbe3ba560ff064304161b9995b1898","0x000000000000000000000000b573ea4f95aafacc41174a24661d322e3e28db47","0x00000000000000000000000091c035258b5a3b13211a74726d72090734e5bf4a"],"data":"0x00000000000000000000000091c035258b5a3b13211a74726d72090734e5bf4a00000000000000000000000000000000000000000000000000000002540be40000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000000","blockHash":"0x2cd24fe031a99bc7cb14b473d4381db373829ff15df141ab5e433d00bef1a0cb","blockNumber":"0x89cf85","transactionHash":"0x7be52532f7e4358124ee6c576991e546ba92b06c488fe955fd1fd075b522f0b8","transactionIndex":"0x8e","logIndex":"0x101","removed":false},{"address":"0x16fc5058f25648194471939df75cf27a2fdc48bc","topics":["0xb3813568d9991fc951961fcb4c784893574240a28925604d09fc577c55bb7c32","0x00000000000000000000000069dd85b8d04ea49cc6dbd3cbffd00b4b8d6cc500","0x0000000000000000000000004200000000000000000000000000000000000007","0x0000000000000000000000000000000000000000000000000000000000000000"],"data":"0x0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000022d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000144a1100d764ad0b0001000000000000000000000000000000000000000000000000000000056475000000000000000000000000fbb0621e0b23b5478b630bd55a5f21f67730b0f10000000000000000000000004200000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f424000000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000e40166a07a000000000000000000000000b573ea4f95aafacc41174a24661d322e3e28db47000000000000000000000000c044905455dbe3ba560ff064304161b9995b189800000000000000000000000091c035258b5a3b13211a74726d72090734e5bf4a00000000000000000000000091c035258b5a3b13211a74726d72090734e5bf4a00000000000000000000000000000000000000000000000000000002540be40000000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","blockHash":"0x2cd24fe031a99bc7cb14b473d4381db373829ff15df141ab5e433d00bef1a0cb","blockNumber":"0x89cf85","transactionHash":"0x7be52532f7e4358124ee6c576991e546ba92b06c488fe955fd1fd075b522f0b8","transactionIndex":"0x8e","logIndex":"0x102","removed":false},{"address":"0x58cc85b8d04ea49cc6dbd3cbffd00b4b8d6cb3ef","topics":["0xcb0f7ffd78f9aee47a248fae8db181db6eee833039123e026dcbff529522e52a","0x0000000000000000000000004200000000000000000000000000000000000010"],"data":"0x000000000000000000000000fbb0621e0b23b5478b630bd55a5f21f67730b0f10000000000000000000000000000000000000000000000000000000000000080000100000000000000000000000000000000000000000000000000000005647500000000000000000000000000000000000000000000000000000000000f424000000000000000000000000000000000000000000000000000000000000000e40166a07a000000000000000000000000b573ea4f95aafacc41174a24661d322e3e28db47000000000000000000000000c044905455dbe3ba560ff064304161b9995b189800000000000000000000000091c035258b5a3b13211a74726d72090734e5bf4a00000000000000000000000091c035258b5a3b13211a74726d72090734e5bf4a00000000000000000000000000000000000000000000000000000002540be40000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","blockHash":"0x2cd24fe031a99bc7cb14b473d4381db373829ff15df141ab5e433d00bef1a0cb","blockNumber":"0x89cf85","transactionHash":"0x7be52532f7e4358124ee6c576991e546ba92b06c488fe955fd1fd075b522f0b8","transactionIndex":"0x8e","logIndex":"0x103","removed":false},{"address":"0x58cc85b8d04ea49cc6dbd3cbffd00b4b8d6cb3ef","topics":["0x8ebb2ec2465bdb2a06a66fc37a0963af8a2a6a1479d81d56fdb8cbb98096d546","0x000000000000000000000000fbb0621e0b23b5478b630bd55a5f21f67730b0f1"],"data":"0x0000000000000000000000000000000000000000000000000000000000000000","blockHash":"0x2cd24fe031a99bc7cb14b473d4381db373829ff15df141ab5e433d00bef1a0cb","blockNumber":"0x89cf85","transactionHash":"0x7be52532f7e4358124ee6c576991e546ba92b06c488fe955fd1fd075b522f0b8","transactionIndex":"0x8e","logIndex":"0x104","removed":false}]
logsBloom            0x0000000000004000001000000400000080000000000000000000000000000000000000010000010000000000000400804000000000000008200010000000000000000000000000004000000a000000000400000000000000400000000081000000000000020000000000000000000800000800000000000004000014000000001200000000001000200000000000000040000000000000001001100000400800020000000000000000008010000000400000000000000000080041000000000000000082000000000000000008020000000000000000000000040000000020000000000010000001000000402000000000000000080000000000000000000400
root
status               1 (success)
transactionHash      0x7be52532f7e4358124ee6c576991e546ba92b06c488fe955fd1fd075b522f0b8
transactionIndex     142
type                 2
blobGasPrice
blobGasUsed
to                   0xFBb0621E0B23b5478B630BD55a5f21f67730B0F1
```
