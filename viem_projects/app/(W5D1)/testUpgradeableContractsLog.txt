开始测试 UpgradeableNFTMarketV1 合约...

=== 合约状态信息 ===
合约地址:
  TOKEN: 0xc044905455dbe3ba560ff064304161b9995b1898
  NFT_V1_IMPL: 0xBaf737945cb17348C5F603d9F6E618302A5143e0
  NFT_V2_IMPL: 0x9A895f01782B181f45E3ca7C6BE9Bb5f4e213CFa
  NFT_PROXY: 0xDad4CbAEEf52420B4e57510097e76badE42301bE
  MARKET_V1_IMPL: 0xd4783f3eD1C6B832553137597408292Fe4F21636
  MARKET_V2_IMPL: 0x5d547f9d1ad7E1132B5295E08c1E614e65716f8F
  MARKET_PROXY: 0x92C5Eb78B93DE6b78e9d24a40bf7e6c34cB199e8
Market 合约的 Token 地址: 0xC044905455DBe3ba560FF064304161b9995B1898

账户信息:
管理员地址: 0x91c035258B5a3B13211A74726d72090734E5BF4a
用户地址: 0x6E3275F92E2d97A373E8AA4d89EAbe51185792Da
当前账户: 0x91c035258B5a3B13211A74726d72090734E5BF4a

=== 测试 NFT 铸造功能 ===
铸造 NFT Token 0...
NFT Token 0 铸造成功
NFT Token 0 的所有者: 0x91c035258B5a3B13211A74726d72090734E5BF4a

=== 测试 NFT 授权功能 ===
授权 Market 合约操作 NFT...
NFT 授权成功

=== 测试 Token 操作 ===
当前账户 Token 余额: 9889999699000000000000000000
授权 Market 合约使用 Token...
Token 授权成功

=== 测试 NFT 上架功能 ===
上架 NFT Token 0，价格: 1000000000000000000 wei
NFT 上架成功
上架信息:
  所有者: 0x91c035258B5a3B13211A74726d72090734E5BF4a
  NFT 合约: 0xDad4CbAEEf52420B4e57510097e76badE42301bE
  价格: 1000000000000000000 wei
  是否激活: true

=== 测试 NFT 购买功能 ===
当前上架信息:
  所有者: 0x91c035258B5a3B13211A74726d72090734E5BF4a
  价格: 1000000000000000000 wei
使用账户 0x6E3275F92E2d97A373E8AA4d89EAbe51185792Da 购买 NFT
给购买者转账Token...
Token 转账成功
购买者授权Market合约使用Token...
购买者Token授权成功
购买 NFT Token 0，价格: 1000000000000000000 wei
NFT 购买成功
购买后 NFT Token 0 的所有者: 0x6E3275F92E2d97A373E8AA4d89EAbe51185792Da
购买后上架状态: 已下架

=== V1 合约测试完成 ===

开始合约升级测试...

=== 开始合约升级 ===
获取 NFT 代理的 ProxyAdmin 地址...
NFT ProxyAdmin 地址: 0x7ba1a28c0a7e4c63ff255e8650f2ff60cebe6722
获取 Market 代理的 ProxyAdmin 地址...
Market ProxyAdmin 地址: 0xa6800acf778e3fc908a52001840e187365232111
升级 NFT 合约到 V2...
NFT 合约升级成功
升级 Market 合约到 V2...
Market 合约升级成功

=== 升级后的合约状态信息 ===
合约地址:
  TOKEN: 0xc044905455dbe3ba560ff064304161b9995b1898
  NFT_V1_IMPL: 0xBaf737945cb17348C5F603d9F6E618302A5143e0
  NFT_V2_IMPL: 0x9A895f01782B181f45E3ca7C6BE9Bb5f4e213CFa
  NFT_PROXY: 0xDad4CbAEEf52420B4e57510097e76badE42301bE
  MARKET_V1_IMPL: 0xd4783f3eD1C6B832553137597408292Fe4F21636
  MARKET_V2_IMPL: 0x5d547f9d1ad7E1132B5295E08c1E614e65716f8F
  MARKET_PROXY: 0x92C5Eb78B93DE6b78e9d24a40bf7e6c34cB199e8
Market 合约的 Token 地址: 0xC044905455DBe3ba560FF064304161b9995B1898
NFT 合约版本: 2.1.0
Market 合约 nonce: 0

账户信息:
管理员地址: 0x91c035258B5a3B13211A74726d72090734E5BF4a
用户地址: 0x6E3275F92E2d97A373E8AA4d89EAbe51185792Da
当前账户: 0x91c035258B5a3B13211A74726d72090734E5BF4a

=== 测试 NFT V2 合约新功能 ===
初始化 NFT V2 合约...
NFT V2 初始化成功
NFT 合约版本: 2.1.0
设置新版本...
版本设置成功
更新后的版本: 2.1.0

=== 测试 Market V2 合约新功能 ===
初始化 Market V2 合约...
Market V2 初始化成功
铸造新的 NFT Token 2 用于测试...
NFT Token 2 铸造成功

=== 测试签名上架功能 ===
NFT Token 2 的所有者: 0x91c035258B5a3B13211A74726d72090734E5BF4a
当前账户: 0x91c035258B5a3B13211A74726d72090734E5BF4a
上架参数:
  NFT 合约: 0xDad4CbAEEf52420B4e57510097e76badE42301bE
  Token ID: 2
  价格: 2000000000000000000 wei
  过期时间: 1754462146
生成签名...
当前 nonce: 0
消息哈希: 0xd8a54c1c96e09b071f83f7cd553acab8eeb676c0f8ef4727627278a88d22ae17
生成的签名: 0xec0c671f79712dbe6ae22764f8c15fad20ee052632ed32368ae7ad2bf9246aa809e1301082f0102f681036f49096bc26abc3731e692885d1b34572df45c395c91b
使用签名上架 NFT...
签名上架成功
上架验证:
  所有者: 0x91c035258B5a3B13211A74726d72090734E5BF4a
  NFT 合约: 0xDad4CbAEEf52420B4e57510097e76badE42301bE
  价格: 2000000000000000000 wei
  是否激活: true

=== 升级测试完成 ===